<!-- base.html -->

{#模版继承与块#}
{#模版继承允许定义一个骨架模版，骨架包含站点上的公共元素（如头部导航，尾部链接）#}
{#骨架模版里面可以定义Block块，每一个Block块都可以在继承的页面上重新定义/覆盖#}

{% load i18n %}

{#定义页面标题，居中显示展示这个页面50%的宽度#}
<h1 style="margin: auto;width: 50%;"> {% translate "**科技开发职位" %} </h1>

<p></p>

{% block header %}
<a href="/" style="text-decoration: none; color:#007bff">{% translate "首页" %}</a>
<a href="/joblist" style="text-decoration: none; color:#007bff">{% translate "职位列表" %}</a>

{% if user.is_authenticated %}
    <a href="/accounts/logout" style="text-decoration: none; color:#007bff">{% translate "退出" %}</a>
{% else %}
    <a href="/accounts/login" style="text-decoration: none; color:#007bff">{% translate "登录" %}</a>
{% endif %}

{% if user.is_authenticated %}
{#    <p>终于等到你 {{ user.username }}, 期待加入我们，用技术去探索一个新世界 </p>#}
    <p>{% blocktranslate with user_name=user.username %}终于等到你 {{ user_name }}, 期待加入我们，用技术去探索一个新世界 {% endblocktranslate %}</p>
{% else %}
    <p>{% translate "欢迎你，期待加入我们，登陆后可以提交简历" %}</p>
{% endif %}
{% endblock %}
<hr>
{# 用户自己选择语言#}
{#Django怎样识别用啥语言？首先从url里面找有没有语言的标记，再从cookie里面找，再从浏览器的头里面去找，如果都没有就是用系统里面设置的默认的LANGUAGE_CODE#}
{#切换语言实现，post请求时，调用set_language的url(我们在urls里面注册的这个i18n)#}
<form action="{% url 'set_language' %}" method="post" style="margin-block-end: 0em;">{% csrf_token %}
{#    成功选择语言后登录的页面，默认首页#}
    <input name="next" type="hidden" value="{{ redirect_to }}">
    <select name="language">
{#        获取当前的语言，保存为LANGUAGE_CODE的变量#}
        {% get_current_language as LANGUAGE_CODE %}
{#        取到所有可用的语言#}
        {% get_available_languages as LANGUAGES %}
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
            <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                {{ language.name_local }} ({{ language.code }})
            </option>
        {% endfor %}
    </select>
    {% translate "language:" %} {{ LANGUAGE_CODE }}
	<input type="submit" value={% translate "Switch" %} style="font-size:12;height:20px">
</form>

{#使用block定义一个块，名字叫content#}
{% block content %}
{% endblock %}